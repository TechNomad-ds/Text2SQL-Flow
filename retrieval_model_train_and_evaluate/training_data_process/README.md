# Question–SQL Alignment Training Data Construction

## Overview

This module converts synthetic data generated by `data_augmentation` into training data for a **Question–SQL Alignment** model.

## Run

### 1. Data Preprocessing

Preprocess the synthetic data into a normalized format:

```bash
python process_augmented_data.py \
  --input_file augmented_data.json \
  --output_file processed_augmented_data.json
```

### 2. Question & SQL Masking

Apply DAIL-SQL preprocessing to `processed_augmented_data.json` as `train.json` to generate masked SQL:

```bash
python get_masked_sql.py \
  --dataset spider \
  --train_json /path/DAIL-SQL/dataset/dataset_name/processed_augmented_data.json \
  --path_data /path/DAIL-SQL/dataset/ \
  --out augmented_data_masked.json
```

### 3. Build Alignment Training Data

#### 3.1 Without Mask Strategy

```bash
python get_training_data.py \
  --input_files augmented_data_masked.json \
  --output_file augmented_training_data.json
```

#### 3.2 With Mask Strategy

```bash
python get_training_data.py \
  --input_files augmented_data_masked.json \
  --output_file augmented_training_data_masked.json \
  --mask
```
